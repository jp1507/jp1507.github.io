{% comment %} Ìè¨Ïä§ÌåÖÏóê 'series' ÌïÑÎìúÍ∞Ä Ï†ïÏùòÎêòÏñ¥ ÏûàÏúºÎ©¥ Ïã§Ìñâ {% endcomment %}
{% if page.series %}

  {% assign series_posts = site.posts | sort: "series_order" %}
  {% assign current_series = page.series %}

  {% comment %} Í∞ôÏùÄ ÏãúÎ¶¨Ï¶àÏùò Î™®Îì† Ìè¨Ïä§ÌåÖÏùÑ Ï∞æÍ≥† series_order ÌïÑÎìúÎ•º Í∏∞Ï§ÄÏúºÎ°ú Ï†ïÎ†¨{% endcomment %}
  {% assign related_posts = site.posts | where: "series", current_series | sort: "series_order" %}

  {% comment %} Ï∞æÏùÄ ÏãúÎ¶¨Ï¶à Ìè¨Ïä§ÌåÖÏù¥ 2Í∞ú Ïù¥ÏÉÅÏùº ÎïåÎßå ÌëúÏãúÌïúÎã§.  {% endcomment %}
  {% if related_posts.size > 1 %}
  <div class="series-nav">
    <div class="series-header" onclick="toggleSeries(this)">
      <p class="series-title"><strong>üóÇÔ∏è {{ current_series }}</strong></p>
      <span class="toggle-icon">‚ñº</span>
    </div>
    <div class="series-content expanded">
      <ol>
        {% for post in related_posts %}
          <li>
            {% if post.url == page.url %}
              <strong>{{ post.title }}</strong>
            {% else %}
              <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
            {% endif %}
          </li>
        {% endfor %}
      </ol>
  </div>

  <script>
    function toggleSeries(header) {
      const content = header.nextElementSibling;
      const icon = header.querySelector('.toggle-icon');
      
      if (content.classList.contains('expanded')) {
        content.classList.remove('expanded');
        content.classList.add('collapsed');
        icon.style.transform = 'rotate(-90deg)';
      } else {
        content.classList.remove('collapsed');
        content.classList.add('expanded');
        icon.style.transform = 'rotate(0deg)';
      }
    }
  </script>

  {% endif %}

{% endif %}