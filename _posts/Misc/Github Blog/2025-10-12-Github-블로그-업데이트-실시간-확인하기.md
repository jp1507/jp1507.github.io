---
title: "[Github 블로그] 업데이트 실시간 반영하기"
date: 2025-10-12 00:10:00 +0900
categories: [Misc, Github Blog]
tags: [github, github blog, jekyll, blog, error, github 블로그, 깃허브, 블로그]
pin: false
math: false
image:
  path: https://imgur.com/l3ku5lP.jpg
---

> Chirpy 테마 버전 7.3.1 기준으로 작성
{: .prompt-info }

## 업데이트 실시간 반영하기

---

우리는 블로그에 포스팅하거나 기타 수정사항이 생겼을 때 `jekyll serve` 명령어를 통해 로컬 환경에서 실시간으로 확인했었다. 그 이유는 Github Action으로 빌드와 배포를 정상적으로 했음에도 수정사항이 실시간으로 반영되지 않기 때문이다. 이에 대한 임시 해결책으로 강한 새로고침(`Ctrl+Shift+R` 또는 `Cmd+Shift+R`)을 통한 **A new version of content is available** 또는 **새 버전의 콘텐츠를 사용할 수 있습니다** 대화창으로 수정사항이 반영됐음을 확인할 수 있었다.

## 문제 원인

---

이러한 번거로움의 이유는 다음과 같다. Chirpy 테마는 페이지에 접속하지 못하는 상황이 발생하더라도, 한 번이라도 방문한 적이 있다면 PWA(Progressive Web Apps)를 이용해 브라우저에 저장된 캐시로 이전에 방문한 페이지를 로드할 수 있도록 구현되어있기 때문이다. 정적 웹사이트에 가장 잘 어울리는 유용한 기능이지만 유,무선 연결 환경이 잘 갖춰진 요즘에는 그 필요성이 떨어진다.

## 해결 방법

---

매번 강한 새로고침 후 대화창의 **업데이트** 버튼을 누르는 것은 불편하고 번거로운 일이다. 많은 개발자들이 단 한 번의 클릭을 줄이기 위해 열심히 자동화하지 않던가. 다른 Chirpy 테마를 사용하는 사람들도 이와같은 불편함을 호소하며 [논의](https://github.com/cotes2020/jekyll-theme-chirpy/issues/527#issuecomment-1079998986)가 이루어졌다. 해당 링크에서, PWA로 인해 대부분 이전 버전의 웹사이트가 표시되어 혼란스럽고, 이를 방지하고자 PWA/캐시 비활성화를 공식적으로 도입해달라는 요청을 Chirpy 테마 개발자에게 하고 있다.  

![이미지1](https://imgur.com/CatNFdl.png)

PWA/캐시 비활성화를 위해 ServiceWorker의 설정을 수정하여 배포와 동시에 페이지가 업데이트 되도록 바꿀 수 있다. 블로그를 방문하는 사용자에게 **새로운 컨텐츠 업데이트를 강제로 즉시 적용**하고, 이후 ServiceWorker의 **캐싱 기능을 완전히 비활성화**하여 캐시 충돌을 방지하는 역할을 한다.

> `sw.js` 파일의 기존 코드는 모두 지우거나 주석 처리한다.
{: .prompt-warning }

```js
// 이전 코드는 모두 지우거나 주석 처리

// 새로운 버전의 ServiceWorker가 설치되자마자 즉시 활성화
self.addEventListener('install', () => {
  self.skipWaiting();
});

self.addEventListener('activate', () => {
  self.registration
    // 기존 ServiceWorker를 제거 
    .unregister()
    // 현재 Service Worker로 제어되고 있는 모든 클라이언트를 찾음
    .then(() => self.clients.matchAll())
    // 찾은 모든 클라이언트를 현재 URL로 강제 로드
    .then((clients) => {
      clients.forEach((client) => {
        if (client.url && 'navigate' in client) {
          client.navigate(client.url);
        }
      });
    });
});
```
{: file="_javascript/pwa/sw.js"}

## 마무리

---


