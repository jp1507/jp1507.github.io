---
title: "[C++] Chapter 9.3 입출력 연산자 오버로딩"
date: 2025-10-28 13:40:00 +0900
categories: ["C, C++, C#", C++]
tags: [programming, cpp, 프로그래밍, C++]
series: "따라하며 배우는 C++"
series_order : 79
math: true
image:
  path: https://imgur.com/Eqg7DeC.jpg
---

## Chapter 9. 연산자 오버로딩 : 입출력 연산자 오버로딩

- 입출력 연산자 : `<<`, `>>`

### 입출력 클래스 istream, ostream

---

**구조**  

- `istream` : 입력을 수행하는 클래스
- `ostream` : 출력을 수행하는 클래스
- `iostream`
  - `#include <iostream>`
  - `istream`, `ostream`을 다중 상속받은 클래스
  - 입출력과 관련된 모든 데이터와 기능을 담당

**std::cout**  

- `ostream` 타입의 객체

```cpp
std::cout << 100 << endl;   // 100 출력
std::cout << 3.14f << endl;   // 3.14f 출력
std::cout << "Hello, World!" << endl;   // "Hello, World!" 출력
...
```

- 위 코드 실행시 `ostream` 클래스 내 구현되어 있는 `<<` 연산자 오버로딩이 호출됨
- `ostream` 타입 객체가 출력 연산자(`<<`)를 만나면 출력 연산자 우측에 있는 것을 인수로 하는 멤버 출력 연산자 오버로딩을 호출

```cpp
ostream& operator<<(bool& val);
ostream& operator<<(short& val);
ostream& operator<<(unsigned short& val);
ostream& operator<<(int& val);
ostream& operator<<(unsigned int& val);
ostream& operator<<(long& val);
ostream& operator<<(unsigned long& val);
ostream& operator<<(float& val);
ostream& operator<<(double& val);
ostream& operator<<(long double& val);
ostream& operator<<(void* val);
...
```

**std::cin**  

- `istream` 타입 객체

```cpp
int a;
float f;
string s;

std::cin >> a;
std::cin >> f;
std::cin >> s;
...
```

- 위 코드 실행시 `istream` 클래스 내 구현되어 있는 `>>` 연산자 오버로딩이 호출됨
- `istream` 타입 객체가 입력 연산자(`>>`)를 만나면 입력 연산자 우측에 있는 것을 인수로 하는 멤버 입력 연산자 오버로딩을 호출

```cpp
istream& operator>>(bool& val);
istream& operator>>(short& val);
istream& operator>>(unsigned short& val);
istream& operator>>(int& val);
istream& operator>>(unsigned int& val);
istream& operator>>(long& val);
istream& operator>>(unsigned long& val);
istream& operator>>(float& val);
istream& operator>>(double& val);
istream& operator>>(long double& val);
istream& operator>>(void* val);
...
```

### 전역 함수로 구현

---

- 입출력 연산자 오버로딩은 멤버 함수로 구현할 수 없고 전역 함수로만 구현할 수 있음

```cpp
A a(3);
std::cout << a;
```

- 위와 같이 연산자 오버로딩을 구현하면 `ostream` 타입 객체가 왼쪽 피연산자인 멤버 함수를 호출하는 객체가 되어야 함
- 멤버 함수로 구현하려면 `ostream` 클래스의 멤버 함수로 구현해야 하는데, `ostream` 클래스는 C++ 표준이기 때문에 직접 `ostream` 클래스를 수정할 수 없음

**출력 연산자 오버로딩**  

- `private` 멤버 사용을 위해 전역 함수로 구현한 후 `friend` 지정

```cpp
#include <iostream>
using namespace std;

class Point
{
private:
    double m_x, m_y, m_z;

public:
    Point(double x = 0.0, double y = 0.0, double z = 0.0) : m_x(x), m_y(y), m_z(z) {}

    friend std::ostream& operator <<(std::ostream& out, const Point& point)
    {
        out << "( " << point.m_x << ", " << point.m_y << ", " << point.m_z << " )";
        return out;
    }
};
```

- `<<` 연산자 오버로딩이 클래스 내부에 구현되어 있어도 **전역 함수**
- 인수로 `ostream` 타입 객체와 `Point` 타입 객체를 전달받음
- 전달 받은 `ostream` 타입 객체를 `ostream&` 참조 타입으로 리턴
  - 연쇄호출을 위해 `ostream` 타입으로 리턴

**입력 연산자 오버로딩**  

```cpp
#include <iostream>
using namespace std;

class Point
{
private:
    double m_x, m_y, m_z;

public:
    Point(double x = 0.0, double y = 0.0, double z = 0.0) : m_x(x), m_y(y), m_z(z) {}

    friend std::istream& operator >>(std::istream& in, Point& point)
    {
        in >> "( " >> point.m_x >> " " >> point.m_y >> " " >> point.m_z >> " )";
        return in;
    }

    friend std::ostream& operator <<(std::ostream& out, const Point& point)
    {
        out << "( " << point.m_x << ", " << point.m_y << ", " << point.m_z << " )";
        return out;
    }
};

int main()
{
    Point p1, p2;

    cin >> p1 >> p2;
    // 1 2 3 4 5 입력
    cout << p1 << " " << p2 << endl;
    // (1, 2, 3) (4, 5, 6) 출력

    return 0;
}
```

**파일 입출력 해보기**  

- `cin`, `cout`과 같은 콘솔 입출력이 아닌 파일에 입출력

```cpp
#include <iostream>
#include <fstream>
#include "Point.h"
using namespace std;

int main()
{
    ofstream of("out.txt"); // 출력할 파일 스트림

    Point p1(0.0, 0.1, 0.2), p2(3.4, 1.5, 2.0);

    cout << p1 << " " << p2 << endl; // 콘솔로 출력
    of << p1 << " " << p2 << endl; // "out.txt" 파일로 출력

    of.close(); 

    return 0;
}
```

- `#include <fstream>`으로 `ofstream`, `ifstream` 타입 객체를 선언
