---
title: "[C++] Chapter 8.10 정적 멤버 변수"
date: 2025-10-27 16:24:00 +0900
categories: ["C, C++, C#", C++]
tags: [programming, cpp, 프로그래밍, C++]
series: "따라하며 배우는 C++"
series_order : 71
math: true
image:
  path: https://imgur.com/Eqg7DeC.jpg
---

## Chapter 8. 객체 지향의 기초 : 정적 멤버 변수

### static 멤버 변수

---

- 모든 객체가 한 메모리를 공유하는 멤버 변수
- 객체 별로 각각 할당되는 멤버가 아니라 모든 객체가 공유하는 멤버
- 모든 객체가 공유하므로 메모리는 프로그램 시작때부터 차지하고 있으며 내내 값이 유지됨
  - 객체 생성 전에도 메모리에 존재
    - 따라서 객체 생성 전에 반드시 미리 초기화를 해주어야 함
    - 객체와는 독립적으로 존재함
  - 객체 이름으로도 접근 가능하지만 클래스 이름으로도 접근 가능  
      ```cpp
      int Something::s_value = 1;
      ```  
    - `s_value`가 `static` 멤버 변수라면 객체1과 객체2의 `s_value`는 주소가 동일함
- 어떤 특정 타입의 모든 객체들의 수 등 모든 객체가 알고 있고 공유할 수 있어야 하는 정보를 `static`으로 사용

### static 멤버 변수 정의

---

- 선언과 정의를 구분함

```cpp
class Something
{
public:
  static int m_value;
}
```

- 단순 선언한 것으로 컴파일러에게 변수의 정보만 제공하고 실제 메모리를 사용하지 않음

```cpp
int Something::m_value = 1; 
```

- 정의를 통해 변수를 초기화하여 실제 메모리에 할당됨

```cpp
#include <iostream>
using namespace std;

class Something
{
public:
    static int m_value;
};

int Something::m_value = 1;

int main()
{
    // int Something::m_value = 1;    Error !!! 

    cout << Something::m_value << endl;  // 1 출력
    cout << &Something::m_value << endl;  // 0x601070 출력

    Something st1;
    Something st2;

    st1.m_value = 2;

    cout << st1.m_value << endl;  // 2 출력 
    cout << &st1.m_value << endl; // 0x601070 출력

    cout << st2.m_value << endl;  // 2 출력
    cout << &st2.m_value << endl; // 0x601070 출력

    st2.m_value = 1024;

    cout << Something::m_value << endl; // 1024 출력

    return 0;
}
```

- `static` 멤버 변수는 모든 객체가 공유해야 하므로 프로그램 전체 영역에서 메모리 유지가 되어야 하고 반드시 전역 범위에서 정의 및 초기화를 해주어야 함
- 따라서 `static` 멤버 변수는 `main()` 함수는 물론, 생성자 내에서도 초기화할 수 없음
  - 생성자도 `static`이어야 하는데 C++에서는 `static` 생성자를 지원하지 않음

**정의 및 초기화는 헤더 파일 내에 한번에 불가능**  

- 헤더 파일과 소스 파일로 분리할 때, `static` 멤버 변수는 반드시 소스 파일에서 초기화 해줘야 함
- 헤더 파일에서 초기화가 불가능한 이유는 여러 곳에서 헤더 파일을 include할 때마다 `static` 멤버 변수를 여러 번 정의 및 초기화하게 될 것이기 때문

```cpp
class Something
{
public:
    static int m_value;
};

int Something::m_value = 1;   // Error !!!
```
{: file="Something.h" }

```cpp
int Something::m_value = 1;
```
{: file="Something.cpp" }

### static const 멤버 변수

---

```cpp
static const int m_value;
```

- `static const` 멤버 변수는 클래스 내에서 초기화 하는 것이 가능
  - `const`이므로 변경하는 것이 불가능하기 때문에 그대로 모든 객체가 공유하기 때문
- 따라서 헤더 파일 내에서도 초기화가 가능함

```cpp
#include <iostream>
using namespace std;

class Something
{
public:
    static const int m_value;
};

// int Something::m_value = 1; const라 클래스 밖에서 값 변경 불가능

int main()
{
    Something st;
    st.m_value = 1024;    // Error !!!

    return 0;
}
```

### private인 static 멤버 변수 초기화

---

```cpp
#include <iostream>
using namespace std;

class A
{
private:
    static int s_value;
};

int A::s_value = 1;

int main()
{
    A a;
    cout << a.s_value << endl;

    A::s_value = 1;   // Error !!!

    return 0;
}
```

- `private` 멤버 변수더라도 `static`이면 외부에서 정의가 가능함

### static 멤버 변수를 클래스 내부에서 초기화 하는 방법

---

- `inner-class`를 사용해 클래스 안에 클래스를 정의하고 그 클래스 생성자에서 초기화할 수 있음
- 이때 클래스에서 클래스의 클래스 객체를 `static` 멤버 변수로 선언해야 함

```cpp
#include <iostream>
using namespace std;

class Something
{
public:
    class _init // inner class
    {
    public:
        _init()
        {
          s_value = 9876; // s_value 접근 가능.
        }
    };

private:
    static int s_value; 
    static _init s_initializer; 
};

// int Something::s_value = 1234; 
Something::_init Something::s_initializer; 
```

1. `Something` 클래스 내에 `_init` 클래스를 정의
2. `_init` 클래스의 생성자에서 `static` 멤버 변수 `s_value`를 초기화
3. `Something` 클래스의 `static` 멤버 변수로 `_init` 타입의 `s_initializer`를 추가
4. 클래스 외부인 전역 범위에서 `Something::_init Something::s_initializer;`로 `static` 멤버 변수를 정의
