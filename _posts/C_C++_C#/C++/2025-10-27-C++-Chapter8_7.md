---
title: "[C++] Chapter 8.7 this 포인터와 연쇄 호출"
date: 2025-10-27 15:33:00 +0900
categories: ["C, C++, C#", C++]
tags: [programming, cpp, 프로그래밍, C++]
series: "따라하며 배우는 C++"
series_order : 68
math: true
image:
  path: https://imgur.com/Eqg7DeC.jpg
---

## Chapter 8. 객체 지향의 기초 : this 포인터와 연쇄 호출

### this 포인터

---

- 자기 자신(객체)의 주소를 담는 포인터
- `this->멤버`로 접근
- `(*this).멤버`를 통해 간접 참조로 접근할 수 있음
- 클래스 내 멤버들을 사용할 때 `this->`가 생략되어 있음

```cpp
class Simple
{
private:
    int m_id;
public: 
    Simple(int id)
    {
        setID(id);
        cout << m_id << endl;
        cout << this << endl;
    }
    void setID(int id) { m_id = id; }
    int getID() { return m_id; }
};

int main()
{
    Simple s1(1);  // 1,  0x7ffccf6ae898 출력
    Simple s2(2);  // 2,  0x7ffccf6ae89c 출력
    
    cout << &s1 << " " << &s2 << endl;  // 0x7ffccf6ae898 0x7ffccf6ae89c 출력

    return 0;
}
```

- 출력 결과 `this` 값이 객체 주소 값과 일치하는 것을 확인할 수 있음
- 객체 `s1`가 생성될 때 생성자가 `this` 값을 출력하는데 `&s1`과 일치함

### 연쇄 호출

---

```cpp
#include <iostream>
using namespace std;

class Calc
{
private:
    int m_value;
public: 
    Calc(int init_value) : m_value(init_value) {}
    void add(int value) { m_value += value;}
    void sub(int value) { m_value -= value; }
    void mult(int value) { m_value *= value; }
    void print() { cout << m_value << endl;}
};

int main()
{
    Calc cal(10);
    cal.add(10);
    cal.sub(3);
    cal.mult(4);
    cal.print();
    return 0;
}
```

- 멤버 함수들을 연이어 호출할 때 계속 `cal.`을 반복해서 사용해야함
- 이때 `this` 포인터를 이용해 연쇄 호출을 사용하면 짧게 줄일 수 있음

```cpp
#include <iostream>
using namespace std;

class Calc
{
private:
    int m_value;
public: 
    Calc(int init_value) : m_value(init_value) {}
    Calc& add(int value) { m_value += value; return *this;}
    Calc& sub(int value) { m_value -= value; return *this; }
    Calc& mult(int value) { m_value *= value; return *this;}
    void print() { cout << m_value << endl; }
};

int main()
{
    Calc cal(10);
    cal.add(10).sub(1).mult(2),print();
    return 0;
}
```

- 각 멤버 함수의 리턴 타입을 `Calc&` 객체 참조로 설정하고 이를 `*this`, 즉 자기 자신(객체)를 반환하면 연쇄 호출로 사용할 수 있음

**일반 리턴**  

- 그냥 `Calc`로 리턴하면 `Calc` 타입 임시 변수에 자기 자신을 복사하고 그것을 리턴
- 진짜 자기 자신을 리턴하는 것이 아닌 또 다른 Calc 타입 객체를 리턴
- 임시 변수는 지역 변수로서 함수가 종료되면 같이 사라짐(R-Value)

**참조 리턴**  

- `Calc&` 참조로 리턴하면 진짜 자기 자신의 레퍼런스를 리턴(R-Value)
