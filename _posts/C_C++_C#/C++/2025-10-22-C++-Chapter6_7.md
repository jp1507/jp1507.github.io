---
title: "[C++] Chapter 6.7 포인터와 정적 배열"
date: 2025-10-22 15:23:00 +0900
categories: ["C, C++, C#", C++]
tags: [programming, cpp, 프로그래밍, C++]
series: "따라하며 배우는 C++"
series_order : 34
math: true
image:
  path: https://imgur.com/Eqg7DeC.jpg
---

## 포인터와 배열

---

```cpp
int arr[5] = {0, 1, 2, 3, 4}; 
int* ptr = arr;
```

- 배열의 변수는 포인터 상수와 같음
- `arr`와 `arr[0]`은 같고, `*arr`와 `arr[0]`이 같음
- `int* ptr = arr;`
  - `ptr` 포인터 변수가 `arr` 배열 주소를 가리키므로 `arr` 배열의 간접 참조 가능
  - `*ptr`와 `arr[0]`이 같고 `*ptr = 100;`과 `arr[0] = 100;`은 같음
    - 배열의 주소를 복사해 담은 포인터로 배열의 원소 값은 바꿀 수 있지만 `char*` 타입 포인터에 `char[]` 문자열 배열의 원소를 바꾸는 것은 불가능

## 배열과 포인터 차이

---

```cpp
int arr[5] = {0, 1, 2, 3, 4}; 
int* ptr = arr;

sizeof(arr) // 20
sizeof(ptr)  // 4
```

- `sizeof`를 이용해 배열을 넣으면 배열의 총 메모리 크기를 반환하지만 포인터를 넣으면 포인터의 크기를 반환

## 함수 파라미터로 배열 사용

---

```cpp
void PrintArray(int* array)
{
  cout << sizeof(array) << endl;
  // 포인터 변수는 항상 같은 크기를 반환
}

int main()
{
    int arr[5] = {0, 1, 2, 3, 4}; 
    int* ptr = arr;
    
    PrintArray(arr);  // 배열의 주소
    PrintArray(ptr); // 포인터 값
}
```

- 함수의 매개변수로 배열을 전달하면 포인터로 간주됨(주소만 복사)
  - 성능 상의 이유로 배열을 통째로 복사하여 넘기는 것은 금지
  - 배열 크기가 클 때 배열을 복사하는 데 비용이 높음
  - 매개변수를 포인터로 선언해 주소를 넘겨주면 포인터로 간접 참조할 수 있으므로 효율적
    - 배열의 주소는 메모리 공간에서 연속적이므로 첫 번째 주소 값만 알면 다른 원소들의 주소도 알 수 있음
- 매개변수로 배열의 주소를 포인터로 넘길 때 배열의 크기도 함께 넘겨줌
    ```cpp
    void PrintArray(int* arr, int len)
    ```

```cpp
void printArray(int array [5])
{
  cout << sizeof(array) << endl;   
}

int main()
{
  int array[5] = {0, 1, 2, 3, 4}; 
  int * ptr = array;
  
  printArray(array);  
  printArray(ptr); 
}
```

- 매개변수로 배열을 받는 것처럼 보여도 포인터임
  - 배열을 위한 포인터라는 정보를 명시하기 위해 `[]`를 사용
  - 매개변수 타입에서만 `*`를 `[]`로 바꿀 수 있음
      ```cpp
      void Func(int** pArr)
      void Func(int* pArr[])
      void Func(int pArr[][]) // Error !!!
      ```
  - `[]` 내부의 숫자도 의미가 없고, 단순히 해당 크기의 배열을 받을 것이라는 표시일 뿐임

## 구조체 또는 클래스의 멤버인 배열을 매개변수로 사용

---

- 이러한 배열은 포인터로 전환되지 않고 배열 그 자체로 넘겨짐

```cpp
#include <iostream>
#include <cstring>

using namespace std;

struct Mystruct
{
  int arr[5] = { 9, 7, 5, 3, 1 };
};

void DoSomething(Mystruct* ms)
{
  cout << sizeof((*ms).arr) << endl; // 4가 아닌 20 출력
}

int main()
{
  Mystruct ms;
  cout << ms.arr[0] << endl;  // 9 출력
  cout << sizeof(ms.arr) << endl; // 20 출력(멤버가 array 배열 하나 뿐)

  DoSomething(ms);

  return 0;
}
```

- 배열이 구조체나 클래스의 멤버일 때는 매개변수가 구조체 타입이든, 구조체 포인터이든 배열 그 자체로 복사되어 넘겨짐
