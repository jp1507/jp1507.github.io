---
title: "[C++] Chapter 14.4 std::exception"
date: 2025-11-03 14:53:00 +0900
categories: ["C, C++, C#", C++]
tags: [programming, cpp, 프로그래밍, C++]
series: "따라하며 배우는 C++"
series_order : 125
math: true
image:
  path: https://imgur.com/Eqg7DeC.jpg
---

## Chapter 14. 예외처리 : std::exception

### std::exception

---

- `#include <exception>`
- `if-else`문을 통해 예외를 인지하게 한 후 직접 `throw`를 던졌지만 문제가 생기면 `std::exception` 클래스를 통해 시스템 상 내부에서 알아서 발생한 예외를 `throw` 함
- C++ 표준 클래스로, 예외의 여러 종류들을 나타내는 자식 클래스들을 두고 있음

```cpp
#include <iostream>
#include <string>
#include <exception>

int main()
{
   try
   {
       std::string s;
       s.resize(-1);
   }
   catch (std::exception& e)
   {
       std::cout << typeid(e).name() << std::endl;
       std::cerr << e.what() << std::endl;
   }
   
   return 0;
}
```
```text
- 출력 -

class std::length_error
string too long 
```

- `string` 문자열의 사이즈를 -1로 지정해 에러가 발생하면 `throw`가 없어도 시스템 상 알아서 예외 종류에 알맞은 `std::exception` 클래스의 자식 클래스로 던짐
  - 길이에 대한 에러이므로 자식 클래스 중 하나인 `std::length_error` 예외 클래스가 던져짐

**what 함수**  

- 예외 종류에 맞는 에러 원인 메세지를 리턴하는 함수
- 에러 메세지를 리턴하므로 리턴 타입은 `const char*`
- `std::exception`의 모든 자식 클래스는 `virtual` 가상 함수인 `what()` 함수를 오버라이딩함

### std::exception 상속 받는 사용자 정의 클래스 만들기

---

```cpp
#include <iostream>
#include <string>
#include <exception>

class CustomException : public std::exception
{
public:
    const char* what() const noexcept override
    {
        return "Custom exception";
    }
};

int main()
{
   try
   {
       throw CustomException();
   }
   catch (std::exception& e)
   {
       std::cout << typeid(e).name() << std::endl;
       std::cerr << e.what() << std::endl;
   }
   
   return 0;
}
```
```text
- 출력 -

class CustomException
Custom exception
```

- `const char* what() const noexcept override`
  - `const` 타입 객체만 호출할 수 있음
  - `noexcept`을 통해 이 함수 내에서는 예외를 던지지 않겠다는 의미를 나타냄
    - C++ 11 이상부터 지원
