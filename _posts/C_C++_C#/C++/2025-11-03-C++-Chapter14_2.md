---
title: "[C++] Chapter 14.2 예외처리와 스택 되감기"
date: 2025-11-03 14:16:00 +0900
categories: ["C, C++, C#", C++]
tags: [programming, cpp, 프로그래밍, C++]
series: "따라하며 배우는 C++"
series_order : 123
math: true
image:
  path: https://imgur.com/Eqg7DeC.jpg
---

## Chapter 14. 예외처리 : 예외처리와 스택 되감기

### 예외처리 과정

---

```cpp
#include <iostream>
using namespace std;

void Last()
{
    cout << "Last" << endl;
    cout << "Throws exception" << endl;
    throw -1;
    cout << "End Last" << endl;
}

void Third()
{
    cout << "Third" << endl;
    Last();
    cout << "End Third" << endl;
}

void Second()
{
    cout << "Second" << endl;
    try
    {
        Third();
    }
    catch (double)
    {
        std::cerr << "Second caught double exception!" << endl;
    }
    cout << "End Second" << endl;
}

void First()
{
    cout << "First" << endl;
    try
    {
        Second();
    }
    catch (int)
    {
        std::cerr << "First caught int exception!" << endl;
    }
    cout << "End First" << endl;
}

int main()
{
    cout << "Start" << endl;
    try
    {
        First(); 
    }
    catch (int)
    {
        std::cerr << "main caught int exception!" << endl;
    }
    cout << "End of main" << endl;
}
```
```text
- 출력 -

Start
First
Second
Third
last
Throws exception
first caught int exception!
End first
End of main
```

1. `main()` 함수 *"Start"* 출력
2. `main()` 함수의 `try`에서 `First()` 함수를 호출하고 *"First"*를 출력
3. `First()` 함수의 `try`에서 `Second()` 함수를 호출하고 *"Second"*를 출력
4. `Second()` 함수의 `try`에서 `Thrid()` 함수를 호출하고 *"Third"*를 출력
5. `Third()` 함수의 `try`에서 `Last()` 함수를 호출하고 *"Last"*를 출력
6. `Last()` 함수에서 *"Throws exception"*를 출력한 후 에러 메세지 `int` 타입 `-1`을 던지고, *"End Last"* 출력 부분은 실행되지 않음
7. `Third()` 함수에서 `Last()`를 호출한 시점으로 돌아왔지만, `-1`을 받을 수 있는 `catch`가 없으므로 *"End Thrid"* 출력 부분이 생략되고 지나감
8. `Second()` 함수에서 `Third()`를 호출한 시점으로 돌아왔지만 `cath (double)`은 `int` 타입을 받을 수 없으므로 *"Second caught double exception!"* 출력 부분은 실행되지 않으며, *"End Second"* 부분도 생략됨
9. `First()` 함수에서 `Second()`를 호출한 시점으로 돌아와 `catch (int)` 부분이 실행되어 *"First caught int exception"*이 출력되고, *"End First"*도 출력됨
10. `main()` 함수에서 `First()`를 호출한 시점으로 돌아왔지만, `First()` 함수에서 이미 예외를 처리했으므로 `main()` 함수의 `catch(int)`는 실행되지 않고, *"End of main"*이 출력됨

> 따라서 `throw`로 예외 처리를 위한 신호를 던지게 되면 알맞은 `catch`를 찾을 때까지, 즉 알맞는 예외처리를 끝낼 때까지 그 아래 모든 부분들은 스킵한 채 강제 되감기하며, 알맞은 `catch`를 찾고 나면 찾은 지점부터 `catch` 이외의 아래 부분들은 정상적으로 실행함
{: .prompt-info }

- 알맞은 `catch`는 `throw` 예외가 일어난 바로 아래 부분에서 찾지 않고 생략 후 스택 되감기를 통해 알맞은 `catch`를 찾음
  - 스택을 통해 계속해서 되감아 알맞은 `catch`로 잡히면 끝남
  - 이미 스택 상 위쪽에서 알맞은 `catch`를 찾아 예외 처리 했다면 아래 쪽의 예외 처리는 실행하지 않음

### catch(...)

---

- 모든 데이터 타입을 받을 수 있는 `catch`

```cpp
catch(int)
{
    cerr << "main caught int exception" << endl;
}
catch(...)
{
    cerr << "main caught ellipses exception" << endl;
}
```

- `throw`가 던진 에러가 `int` 타입이 아니라면 `catch(...)`에서 예외 처리가 이루어질 것임

### 함수와 throw

---

```cpp
void Last() throw(int)
{
    cout << "Last" << endl;  
    cout << "Throws exception" << endl; 
    throw 'a';
    cout << "End Last" << endl; 
}
```

- `void Last() throw(int)`는 이 함수가 `int` 타입 에러 메세지를 던질 수도 있다는 의미
- `void Last() throw(...)`는 어떤 타입의 에러 메세지든 던질 수 있다는 의미
- `void Last() throw()`는 예외를 발생시키지 않는다는 의미인데, 함수 내에 `throw`로 예외를 발생시키면 에러가 발생함
