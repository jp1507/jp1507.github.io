---
title: "[C++] Chapter 7.8 스택과 힙"
date: 2025-10-26 13:34:00 +0900
categories: ["C, C++, C#", C++]
tags: [programming, cpp, 프로그래밍, C++]
series: "따라하며 배우는 C++"
series_order : 55
math: true
image:
  path: https://imgur.com/Eqg7DeC.jpg
---

## Chapter 7. 함수 : 스택과 힙

### Stack 메모리

---

1. 속도가 빠름
2. 크기가 작음
   - 작아서 overflow가 일어나기 쉬움
   - `int arr[1000000]`이나 재귀 호출 등도 overflow가 일어나기 쉬움
3. 아래에서부터 위로 가는 방향으로 순서대로 쌓임

```cpp
#include <iostream>
using namespace std;

int g_i = 0;

int second(int x)
{
   return 2 * x;
}

int first(int x)
{
   int y = 3;
   return second(x + y);
}

int main()
{
  int a = 1, b;
  b = first(a)
  cout << b << endl;

  return 0;
}
```

### Heap 메모리

---

1. Stack 메모리와 달리 Heap 메모리는 어느 공간에 저장될지 알 수 없음
2. 크기가 큼

```cpp
int main()
{
  int* ptr = nullptr;
  ptr = new int[1000000];

  delete[] ptr;
  return 0;
}
```

### 메모리 누수

---

- Heap 메모리로부터 동적 할당 받은 공간을 delete 해주지 않은 경우 발생
- 프로그램 종료 후 Stack 메모리의 포인터 변수가 해제되어 동적 할당 받은 메모리의 주소를 잃어버리고, 접근할 수 없는 Heap 메모리 상 가비지가 발생
- 이와 같이 가비지가 쌓이면 메모리 누수가 발생하므로 Heap 메모리를 할당 받은 후 반드시 해제해줘야함
