---
title: "[C++] Chapter 13.5 클래스 템플릿 특수화"
date: 2025-11-02 13:42:00 +0900
categories: ["C, C++, C#", C++]
tags: [programming, cpp, 프로그래밍, C++]
series: "따라하며 배우는 C++"
series_order : 118
math: true
image:
  path: https://imgur.com/Eqg7DeC.jpg
---

## Chapter 13. 템플릿 : 클래스 템플릿 특수화

- 특수화 : 템플릿에서 특정 타입에 대해 다른 실행 처리를 하고 싶을 때 그 타입에 대해서만 특수화

### 클래스 템플릿 특수화

```cpp
template<>
class A<char>
{
};
```

- `T`를 구체화하므로 `T`를 제외한 `typename<>`을 붙인 뒤 클래스 이름 옆에 `<Type>`을 명시

```cpp
#include <iostream>
using namespace std;

template<typename T>
class A 
{
public:
    A(const T& input) {}

    void DoSomething()
    {
        cout << typeid(T).name() << endl;
    }
    
    void Test() {}
};


template<>
class A<char>
{
public:
    A(const char& input) {}

    void DoSomething()
    {
        cout << "Char type specialization" << endl;
    }
};

int main()
{
    A<int> a_int(1);
    A<double> a_double(3.14);
    A<char> a_char('a');
    
    a_int.DoSomething();
    a_double.DoSomething();
    a_char.DoSomething();
    
    a_char.Test();      // Error !!!

    return 0;
}
```

- `char` 타입만 특수화했기 때문에 다른 타입들로 구체화될 때와 다르게 `test()` 함수가 없음
- `char` 타입으로 구체화될 때만 다른 클래스 템플릿으로 생성하기 때문에 생성자도 따로 정의해야 함
- C++ 17 이상부터 생성자 매개변수로 들어가는 인수 `T` 타입을 알 수 있는 경우 `<Type>` 생략 가능

```cpp
  A a_int(1);   // int로 구체화
  A a_double(3.14);  // double로 구체화
  A a_char('a');   // char로 구체화
```

### 응용

---

```cpp
#include <iostream>
using namespace std;

template<typename T>
class Storage8
{
private:
    T m_array[8];
public:
    void Set(int index, const T &value)
    {
        m_array[index] = value;
    }
    
    const T& Get(int index)
    {
        return m_array[index];
    }
};


template<>
class Storage8<bool>
{
private:
    unsigned char m_data;
public:
    Storage8() : m_data(0) {}

    void Set(int index, bool value)
    {
        unsigned char mask = 1 << index;
        
        if (value)
            m_data |= mask;
        else
            m_data &= ~mask;
    }
    
    bool Get(int index)
    {
        unsigned char mask = 1 << index;
        return (m_data & mask) != 0;
    }
};

int main()
{
    Storage8<int> intStorage;
    
    for (int cnt = 0; cnt < 8; cnt++)
        intStorage.Set(cnt, cnt);
    for (int cnt = 0; cnt < 8; cnt++)
        cout << intStorage.Get(cnt) << " ";
    cout << " Sizeof Storage8<int> " << sizeof(Storage8<int>) << endl;
    // 0 1 2 3 4 5 6 7 Sizeof Storage8<int> 32 출력    
    
    Storage8<bool> boolStorage;
    
    for (int cnt = 0; cnt < 8; cnt++)
        boolStorage.Set(cnt, cnt & 3);
    for (int cnt = 0; cnt < 8; cnt++)
        cout << boolStorage.Get(cnt) << " ";
    cout << " Sizeof Storage8<bool> " << sizeof(Storage8<bool>) << endl;
    // 0 1 1 1 0 1 1 1 Sizeof Storage8<bool> 1 출력
    
    return 0;
}
```

- `bool` 타입일 때 템플릿 특수화
- `int`로 구체화되었을 때 크기가 32이고, `bool` 타입으로 구체화되었을 때는 `char` 타입 멤버 하나로 크기가 1이 출력됨
